
{% extends  "maps/base.html" %}

 {% block content %}

    <h1>Sjekk ditt område:</h1>
    <div>
        <form method="get">
            <input type="text" id="id_query" placeholder="postnummer">
            <button type="button">Søk</button>
        </form>
    </div>



    <div id='map' style='width: 100; height: 800px;'></div>
    <script>

        <!--Mapbox-->
        mapboxgl.accessToken = '{{ mapbox_access_token }}';//access token
        var map = new mapboxgl.Map({
        container: 'map',
        style: 'mapbox://styles/skup2506/ckl8epxj02oyt17s1vb1ghpnn',  //mapbox style URL
        center: [10.404, 63.417],
        zoom: 12
        });

        //NavigationControl
        var nav = new mapboxgl.NavigationControl();
        map.addControl(nav, 'top-left');


        //MapMouseEvent and marker
        map.on('click', function(e) {
            // The event object (e) contains information like the
            // coordinates of the point on the map that was clicked.
            
            //console.log('A click event has occurred at ' + e.lngLat + e.lngLat.lng);
            
            //marker
            var marker = new mapboxgl.Marker({
                    color: '#004fa4',
                    draggable: true

                })
                .setLngLat([e.lngLat.lng, e.lngLat.lat])
                .setPopup(
                    new mapboxgl.Popup({})
                    .setLngLat([e.lngLat.lng, e.lngLat.lat])
                    .setHTML("<h1>Hello World!</h1>").addTo(map))
                .addTo(map);
                    
            //pop-up 
            /*
            new mapboxgl.Popup({

                })
                .setLngLat([e.lngLat.lng, e.lngLat.lat])
                .setHTML("<h1>Hello World!</h1>").addTo(map);
            */
            //https://docs.mapbox.com/mapbox-gl-js/example/popup-on-click/ vise lagret popup fra geojson
           
        });

   </script>

{% endblock content %}
